{% extends 'base.html' %}
{% load static %}
{% load currency_filters %}

{% block conteudo %}

<div class="col-md-12 order-md-1">
    <div class="row">
        <div class="col-4 col-md-2">
            <a class="btn btn-primary btn-sm btn-block" href="{% url 'fluxo:ad_receita' %}" role="button">Adicionar Receita</a>
        </div>
        <div class="col-4 col-md-2">
            <a class="btn btn-danger btn-sm btn-block" href="{% url 'fluxo:ad_despesa' %}" role="button">Adicionar Despesa</a>
        </div>
        <div class="col-4 col-md-2 offset-md-6">
            <a class="btn btn-secondary btn-sm btn-block" href="{% url "fluxo:filtros" %}" role="button">Filtros</a>
        </div>
</div>

<br>
<div class="table-responsive">
    <table class="table table-hover table-striped table-sm">
        <thead>
        <tr>
            <th>Data</th>
            <th>Categoria</th>
            <th>Descrição</th>
            <th class="text-right">Valor</th>
            <th class="text-right">Saldo</th>
            <th>Situação</th>
        </tr>
        </thead>
        <tbody>
            {% for item in lancamentos_com_saldos %}
            <tr>
                <td>{{ item.lancamento.data_lancamento|date:"d M" }}</td>
                <td>{{ item.lancamento.itens.first.categoria }}</td>
                <td><a class="text-info" href="../../{{ item.lancamento.tipo|lower }}/edit/{{ item.lancamento.id }}" >{{ item.lancamento.itens.first.descricao }}</a></td>
                <td class="text-right">{{ item.lancamento.itens.first.valor|currency }}</td>
                <td class="text-right">{{ item.saldo|currency }}</td>
                <td>{{ item.lancamento.situação }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

<div>
    <p class="font-weight-bold text-right">Soma dos Valores: R$ {{ saldo_geral }}</p>
</div>

<nav aria-label="Page navigation" class="navigation">
    <ul class="pagination pagination-sm">
        {% if lancamentos_com_saldos.has_previous %}
        <li class="page-item"><a href="?page=1&{{ parameters }}" class="page-link">&laquo; Primeiro</a></li>
        <li class="page-item"><a href="?page={{ lancamentos_com_saldos.previous_page_number }}&{{ parameters }}" class="page-link">Anterior</a></li>
        {% endif %}
        <li class="page-item"><a href="#" class="page-link">Página {{ lancamentos_com_saldos.number }} de {{ lancamentos_com_saldos.paginator.num_pages }}</a></li>
        {% if lancamentos_com_saldos.has_next %}
        <li class="page-item"><a href="?page={{ lancamentos_com_saldos.next_page_number }}&{{ parameters }}" class="page-link">Próximo</a></li>
        <li class="page-item"><a href="?page={{ lancamentos_com_saldos.paginator.num_pages }}&{{ parameters }}" class="page-link">Último &raquo;</a></li>
        {% endif %}
    </ul>
</nav>

{% endblock conteudo %}
